Setup Instructions - Clothing Store Management System
======================================================

IMPORTANT: If someone else is running the server for you, they need to follow 
the "Server Setup" section (section 3) to configure their router and firewall.

1. Running the Server
----------------------
The server must run on one computer. All clients connect to the same server.

IMPORTANT: If you're asking someone else to run the server on their computer, 
they need to do the setup steps below. Send them this file or section 3 (Server Setup).

IMPORTANT: If you're on a university/college network, it's recommended to use Mobile Hotspot from your phone (see Server Setup in section 3).

Option A: Using IntelliJ IDEA (or another IDE)
a. Open the project in IntelliJ IDEA
b. Find the file: src/server/ServerMain.java
c. Run the file (Run -> Run 'ServerMain' or Shift+F10)
d. If everything is OK, you will see: "Server listening on port 5000"
e. Keep the window open - the server must run all the time

Option B: Using Terminal/Command Line
a. Open Terminal (Linux/Mac) or Command Prompt (Windows)
b. Navigate to the project directory (where src/ folder is located)
c. Compile all Java files. You can use one of these methods:
   
   Method 1 - Compile all files at once (if your system supports it):
   - Windows: javac -d out -encoding UTF-8 -sourcepath src src\server\*.java src\controller\*.java src\model\*.java src\model\managers\*.java src\model\exceptions\*.java src\storage\*.java src\gui\*.java src\gui\dialogs\*.java src\gui\tabs\*.java src\gui\windows\*.java
   - Linux/Mac: javac -d out -encoding UTF-8 -sourcepath src src/server/*.java src/controller/*.java src/model/*.java src/model/managers/*.java src/model/exceptions/*.java src/storage/*.java src/gui/*.java src/gui/dialogs/*.java src/gui/tabs/*.java src/gui/windows/*.java
   
   Method 2 - Compile recursively (simpler):
   - Find all .java files and compile them:
     Windows PowerShell: Get-ChildItem -Recurse -Filter *.java | ForEach-Object { javac -d out -encoding UTF-8 -sourcepath src $_.FullName }
     Linux/Mac: find src -name "*.java" -exec javac -d out -encoding UTF-8 -sourcepath src {} \;
   
   Note: Make sure the "out" folder exists. If not, create it first: mkdir out

d. Run the server:
   - java -cp out server.ServerMain
e. If everything is OK, you will see: "Server listening on port 5000"
f. Keep the terminal open - the server must run all the time


2. Running a Client
-------------------
Every user who wants to use the software needs to run the client on their computer.

Option A: Using IntelliJ IDEA (or another IDE)
a. Open the project in IntelliJ IDEA
b. Find the file: src/gui/LoginWindow.java
c. Run the file (Run -> Run 'LoginWindow' or Shift+F10)
d. A login window will open

Option B: Using Terminal/Command Line
a. Open Terminal (Linux/Mac) or Command Prompt (Windows)
b. Navigate to the project directory (where src/ folder is located)
c. If you haven't compiled yet, compile all Java files (see Server instructions in section 1)
d. Run the client:
   - java -cp out gui.LoginWindow
e. A login window will open


3. Connecting from Multiple Computers (Different Networks)
----------------------------------------------------------
The client.config file already contains the server's public IP address: 176.228.136.99

If you download the project from Git:
- The client.config file already exists with the correct server address
- Just run LoginWindow and the software will connect to the server automatically
- Works from any network (home, office, cafe, etc.)

IMPORTANT: The server must have port forwarding configured on its router:
- Port 5000 must be forwarded to the server computer's local IP
- Firewall must allow port 5000

Server Setup (Only for the person running the server):

IMPORTANT: If you're on a university/company network, you may not have access to router settings.
In that case, contact your network administrator to configure port forwarding.

Option A: If you have access to your router (home network):
- Access router admin panel:
  - Common addresses: http://192.168.1.1, http://192.168.0.1, http://10.0.0.1
  - To find your router IP: Open CMD, type "ipconfig", look for "Default Gateway"
- Find "Port Forwarding" or "Virtual Server" settings
- Add rule: External Port 5000 -> Internal Port 5000 -> Server's local IP (from ipconfig)
- Protocol: TCP
- Save settings

Option B: If you're on a university/company network:
- Contact your network administrator
- Ask them to forward port 5000 to your computer's IP address (10.160.8.50)
- Or ask if there's a different way to expose your server

Configure Firewall:
- Allow port 5000 in Windows Firewall:
  - Open Windows Defender Firewall
  - Advanced Settings -> Inbound Rules -> New Rule
  - Port -> TCP -> Specific local ports: 5000 -> Allow connection
- Or use PowerShell (run as Administrator):
  netsh advfirewall firewall add rule name="Java Server Port 5000" dir=in action=allow protocol=TCP localport=5000

Client Setup (Everyone else):
- Download project from Git
- client.config already contains: serverHost=176.228.136.99
- Just run LoginWindow - it will connect automatically!


4. Example - Using 3 Computers from Different Networks
--------------------------------------------------------
Computer 1 (Server):
- Public IP: 176.228.136.99
- Runs ServerMain
- Port forwarding configured (port 5000)
- Firewall allows port 5000
- Keeps the server open

Computer 2 - Any Network (Office, Home, Cafe, etc.):
- Downloads project from Git
- client.config already contains: serverHost=176.228.136.99
- Runs LoginWindow
- Connects to server automatically

Computer 3 - Any Network:
- Downloads project from Git
- client.config already contains: serverHost=176.228.136.99
- Runs LoginWindow
- Connects to the same server automatically

All users see the same data and communicate with each other in chat!

Note: All clients automatically use the server's public IP (176.228.136.99) - no configuration needed!


5. Default Users
----------------
When running the server for the first time, a default user is created automatically:
- admin / admin (System Administrator)

Use this for initial login.


6. Troubleshooting
------------------
If the client cannot connect to the server and you see "Cannot connect to server" error:

Step 1: Check the server is running
- On the server computer (176.228.136.99), make sure ServerMain is running
- You should see "Server listening on port 5000" message
- You should see "Server is ready to accept connections from any network interface"
- If not, restart the server

Step 2: Check client.config file
- On the client computer, open client.config file
- It should contain: serverHost=176.228.136.99
- Make sure there are no extra spaces or characters
- The file should be in the project root folder (same folder as src/)
- If the file is missing or has wrong IP, download the project again from Git

Step 3: Check network connection
- Try to ping the server's public IP:
  - Windows: ping 176.228.136.99
  - Linux/Mac: ping 176.228.136.99
- If ping fails, check your internet connection
- If ping succeeds but connection fails, check port forwarding on server's router

Step 4: Check Firewall
- On the server computer (176.228.136.99), check Windows Firewall:
  - Windows: Control Panel -> Windows Defender Firewall -> Allow an app
  - Make sure Java is allowed, or allow port 5000
- On client computer, check if outgoing connections are blocked

Step 5: Check console messages
- When running the client, check the console/terminal output
- You should see: "ClientConnection initialized with server host: 176.228.136.99"
- You should see: "Attempting to connect to server at 176.228.136.99:5000"
- If you see a different IP address, the client.config file is not being read correctly

Step 6: Verify server IP address
- The server's public IP is: 176.228.136.99
- Make sure client.config contains: serverHost=176.228.136.99
- If you see a different IP in client.config, download the project again from Git
- Make sure port forwarding is configured on the server's router (port 5000 -> server's local IP)

Step 7: Test connection manually
- On the client computer, test if you can reach the server:
  - Windows: Open CMD, type: telnet 176.228.136.99 5000
  - If telnet is not available, try: Test-NetConnection -ComputerName 176.228.136.99 -Port 5000 (PowerShell)
  - Linux/Mac: Open Terminal, type: telnet 176.228.136.99 5000 or: nc -zv 176.228.136.99 5000
- If connection fails, the problem is network/Firewall related
- If connection succeeds, the problem is in the Java application

Step 8: Check console output
- When running the client, check the console/terminal for these messages:
  - "ClientConnection initialized with server host: 176.228.136.99" (should show this IP)
  - "Attempting to connect to server at 176.228.136.99:5000"
  - If you see "localhost" or a different IP, the client.config file is not being read correctly
- When running the server, check for:
  - "Server listening on port 5000"
  - "Server is ready to accept connections from any network interface"

If there are other errors:
- Make sure all files loaded correctly
- Make sure there is a data/ folder with JSON files
- Check the console to see detailed error messages


7. Important Notes
------------------
- The server must run all the time - if you close it, all clients disconnect
- All clients see the same data (products, customers, sales)
- Chat works between all connected users
- Every change in the system updates automatically for all users
