Setup Instructions - Clothing Store Management System
======================================================

1. Running the Server
----------------------
The server must run on one computer. All clients connect to the same server.

Option A: Using IntelliJ IDEA (or another IDE)
a. Open the project in IntelliJ IDEA
b. Find the file: src/server/ServerMain.java
c. Run the file (Run -> Run 'ServerMain' or Shift+F10)
d. If everything is OK, you will see: "Server listening on port 5000"
e. Keep the window open - the server must run all the time

Option B: Using Terminal/Command Line
a. Open Terminal (Linux/Mac) or Command Prompt (Windows)
b. Navigate to the project directory (where src/ folder is located)
c. Compile all Java files. You can use one of these methods:
   
   Method 1 - Compile all files at once (if your system supports it):
   - Windows: javac -d out -encoding UTF-8 -sourcepath src src\server\*.java src\controller\*.java src\model\*.java src\model\managers\*.java src\model\exceptions\*.java src\storage\*.java src\gui\*.java src\gui\dialogs\*.java src\gui\tabs\*.java src\gui\windows\*.java
   - Linux/Mac: javac -d out -encoding UTF-8 -sourcepath src src/server/*.java src/controller/*.java src/model/*.java src/model/managers/*.java src/model/exceptions/*.java src/storage/*.java src/gui/*.java src/gui/dialogs/*.java src/gui/tabs/*.java src/gui/windows/*.java
   
   Method 2 - Compile recursively (simpler):
   - Find all .java files and compile them:
     Windows PowerShell: Get-ChildItem -Recurse -Filter *.java | ForEach-Object { javac -d out -encoding UTF-8 -sourcepath src $_.FullName }
     Linux/Mac: find src -name "*.java" -exec javac -d out -encoding UTF-8 -sourcepath src {} \;
   
   Note: Make sure the "out" folder exists. If not, create it first: mkdir out

d. Run the server:
   - java -cp out server.ServerMain
e. If everything is OK, you will see: "Server listening on port 5000"
f. Keep the terminal open - the server must run all the time


2. Running a Client
-------------------
Every user who wants to use the software needs to run the client on their computer.

Option A: Using IntelliJ IDEA (or another IDE)
a. Open the project in IntelliJ IDEA
b. Find the file: src/gui/LoginWindow.java
c. Run the file (Run -> Run 'LoginWindow' or Shift+F10)
d. A login window will open

Option B: Using Terminal/Command Line
a. Open Terminal (Linux/Mac) or Command Prompt (Windows)
b. Navigate to the project directory (where src/ folder is located)
c. If you haven't compiled yet, compile all Java files (see Server instructions in section 1)
d. Run the client:
   - java -cp out gui.LoginWindow
e. A login window will open


3. Connecting from Multiple Computers (Different Networks)
----------------------------------------------------------
To connect computers from different networks (not on the same WiFi/Ethernet):

IMPORTANT: The server computer needs a public IP address and port forwarding configured.

Step 1: Get the server's public IP address
- On the server computer, open a web browser
- Go to: https://whatismyipaddress.com (or any similar service)
- Note the public IP address shown (for example: 85.123.45.67)
- This is the IP address that clients from other networks will use

Step 2: Configure Port Forwarding on the server's router
- Access your router's admin panel (usually http://192.168.1.1 or http://192.168.0.1)
- Find "Port Forwarding" or "Virtual Server" settings
- Add a new rule:
  - External Port: 5000
  - Internal Port: 5000
  - Internal IP: [The server computer's local IP, e.g., 192.168.56.1]
  - Protocol: TCP
- Save the settings

Step 3: Update client.config on all client computers
- Open client.config file
- Change serverHost to the public IP address from Step 1:
  serverHost=85.123.45.67
  (Replace 85.123.45.67 with your actual public IP)
- Save the file

Step 4: Configure Firewall on server computer
- Allow port 5000 in Windows Firewall (or your firewall software)
- Make sure Java is allowed through the firewall

Now clients from any network can connect using the public IP address!

Note: If the server's public IP changes (dynamic IP), you'll need to update client.config on all clients.


4. Example - Using 3 Computers from Different Networks
--------------------------------------------------------
Computer 1 (Server) - Home Network:
- Public IP: 85.123.45.67 (example)
- Local IP: 192.168.56.1
- Runs ServerMain
- Port forwarding configured on router (port 5000 -> 192.168.56.1:5000)
- Firewall allows port 5000
- Keeps the server open

Computer 2 - Different Network (Office):
- Downloads project from Git
- Updates client.config: serverHost=85.123.45.67
- Runs LoginWindow
- Connects to server using public IP

Computer 3 - Different Network (Cafe):
- Downloads project from Git
- Updates client.config: serverHost=85.123.45.67
- Runs LoginWindow
- Connects to the same server using public IP

All users see the same data and communicate with each other in chat!

Note: All clients must use the server's PUBLIC IP address, not the local IP.


5. Default Users
----------------
When running the server for the first time, a default user is created automatically:
- admin / admin (System Administrator)

Use this for initial login.


6. Troubleshooting
------------------
If the client cannot connect to the server and you see "Cannot connect to server" error:

Step 1: Check the server is running
- On the server computer (192.168.56.1), make sure ServerMain is running
- You should see "Server listening on port 5000" message
- If not, restart the server

Step 2: Check client.config file
- On the client computer, open client.config file
- If on the SAME network as server: serverHost=192.168.56.1 (server's local IP)
- If on DIFFERENT network: serverHost=[server's public IP] (see section 3)
- Make sure there are no extra spaces or characters
- The file should be in the project root folder (same folder as src/)

Step 3: Check network connection
- If computers are on the SAME network:
  - Try to ping the server's local IP: ping 192.168.56.1
  - If ping fails, check network connection
- If computers are on DIFFERENT networks:
  - You need the server's PUBLIC IP address (see section 3)
  - Try to ping the public IP: ping [public-ip]
  - Make sure port forwarding is configured on the server's router

Step 4: Check Firewall
- On the server computer (192.168.56.1), check Windows Firewall:
  - Windows: Control Panel -> Windows Defender Firewall -> Allow an app
  - Make sure Java is allowed, or allow port 5000
- On client computer, check if outgoing connections are blocked

Step 5: Check console messages
- When running the client, check the console/terminal output
- You should see: "ClientConnection initialized with server host: 192.168.56.1"
- You should see: "Attempting to connect to server at 192.168.56.1:5000"
- If you see a different IP address, the client.config file is not being read correctly

Step 6: Verify server IP address
- If clients are on the SAME network as server:
  - On server computer, find local IP: ipconfig (Windows) or ifconfig (Linux/Mac)
  - Look for "IPv4 Address" (for example: 192.168.56.1)
  - Make sure client.config has this local IP
- If clients are on DIFFERENT networks:
  - On server computer, find PUBLIC IP: visit https://whatismyipaddress.com
  - Make sure client.config has the PUBLIC IP (not local IP)
  - Make sure port forwarding is configured on the router (port 5000)

Step 7: Test connection manually
- On the client computer, test if you can reach the server:
  - Windows: Open CMD, type: telnet 192.168.56.1 5000
  - If telnet is not available, try: Test-NetConnection -ComputerName 192.168.56.1 -Port 5000 (PowerShell)
  - Linux/Mac: Open Terminal, type: telnet 192.168.56.1 5000 or: nc -zv 192.168.56.1 5000
- If connection fails, the problem is network/Firewall related
- If connection succeeds, the problem is in the Java application

Step 8: Check console output
- When running the client, check the console/terminal for these messages:
  - "ClientConnection initialized with server host: 192.168.56.1" (should show the correct IP)
  - "Attempting to connect to server at 192.168.56.1:5000"
  - If you see "localhost" instead of "192.168.56.1", the client.config file is not being read
- When running the server, check for:
  - "Server listening on port 5000"
  - "Server is ready to accept connections from any network interface"

If there are other errors:
- Make sure all files loaded correctly
- Make sure there is a data/ folder with JSON files
- Check the console to see detailed error messages


7. Important Notes
------------------
- The server must run all the time - if you close it, all clients disconnect
- All clients see the same data (products, customers, sales)
- Chat works between all connected users
- Every change in the system updates automatically for all users
